export var XtalDeco=function(_HTMLElement){babelHelpers.inherits(XtalDeco,_HTMLElement);function XtalDeco(){var _this;babelHelpers.classCallCheck(this,XtalDeco);_this=babelHelpers.possibleConstructorReturn(this,(XtalDeco.__proto__||Object.getPrototypeOf(XtalDeco)).call(this));_this.style.display="none";return _this}babelHelpers.createClass(XtalDeco,[{key:"connectedCallback",value:function connectedCallback(){this.getElement("_nextSibling",function(t){return t.nextElementSibling});this.getElement("_script",function(t){return t.querySelector("script")})}},{key:"attachBehavior",value:function attachBehavior(evalObj){var _this2=this;for(var topKey in evalObj){var subObj=evalObj[topKey];switch(topKey){case"on":for(var key in subObj){var handlerKey=key+"_decoHandler",prop=Object.defineProperty(this._nextSibling,handlerKey,{enumerable:!1,configurable:!0,writable:!0,value:subObj[key]});this._nextSibling.addEventListener(key,this._nextSibling[handlerKey])}break;case"props":var _loop=function(_key){var propVal=subObj[_key];Object.defineProperty(_this2._nextSibling,_key,{get:function get(){return this["_"+_key]},set:function set(val){this["_"+_key]=val;var newEvent=new CustomEvent(_key+"-changed",{detail:{value:val},bubbles:!0,composed:!1});this.dispatchEvent(newEvent);if(this.onPropsChange)this.onPropsChange(_key,val)},enumerable:!0,configurable:!0});_this2._nextSibling[_key]=propVal};for(var _key in subObj){_loop(_key)}break;default:switch(babelHelpers.typeof(subObj)){case"function":Object.defineProperty(this._nextSibling,topKey,{enumerable:!1,configurable:!0,writable:!0,value:subObj});break;case"object":this._nextSibling[topKey]=subObj;break;}}}}},{key:"getElement",value:function getElement(fieldName,getter){var _this3=this;this[fieldName]=getter(this);if(!this[fieldName]){setTimeout(function(){_this3.getElement(fieldName,getter)});return}this.onDecoPropsChange()}},{key:"evaluateCode",value:function evaluateCode(){var evalObj=eval(this._script.innerHTML);this.attachBehavior(evalObj);this._nextSibling.removeAttribute("disabled")}},{key:"onDecoPropsChange",value:function onDecoPropsChange(){if(!this._nextSibling||!this._script)return;this.evaluateCode()}}],[{key:"is",get:function get(){return"xtal-deco"}}]);return XtalDeco}(HTMLElement);customElements.define(XtalDeco.is,XtalDeco);