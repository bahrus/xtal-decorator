(function(){var a=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments));return a._CssSelector='dom-bind',a._minElementCount=1,a._retries=0,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'attributeChangedCallback',value:function(a,b,c){'selector'===a?this._CssSelector=c:'min-element-count'===a?this._minElementCount=parseInt(c):'validate-targets'===a?this._validateTargets=null!==c:void 0}},{key:'disconnectedCallback',value:function(){this._domObserver.disconnect()}},{key:'getShadowSubTargets',value:function(a,b){var c=[];return a.forEach(function(a){var d=a.shadowRoot,e=d.querySelectorAll(b),f=[].slice.call(e);f.forEach(function(a){return c.push(a)})}),c}},{key:'getHost',value:function(){for(var a=this.parentElement;a;){if(a.shadowRoot)return a;a=a.parentElement}}},{key:'getTargets',value:function(){switch(this._CssSelector){case'_host':var a=this.getHost();return a?[a]:null;default:for(var b=this._CssSelector.split('>>>'),c=[].slice.call(this.parentElement.querySelectorAll(b[0])),d=1,e=b.length;d<e;d++)c=this.getShadowSubTargets(c,b[d]);return c;}}},{key:'applyScript',value:function(a,b){var c=this;if(a){var d=a.innerText;if(d!==this._previousEvaluatedText){var e=eval(d);this._previousEvaluatedText=d;for(var f=void 0,g=0,h=e.length;g<h;g++){var i=e[g],j=function(){var a=i[k];switch('undefined'===typeof a?'undefined':babelHelpers.typeof(a)){case'function':b.forEach(function(b){Object.defineProperty(b,k,{enumerable:!1,configurable:!0,writable:!0,value:a})});break;case'object':switch(k){case'style':var d=function(c){b.forEach(function(b){b.style[c]=a[c]})};for(var e in a)d(e);break;case'properties':f?c.mergeDeep(f,a):f=a;break;case'polymerProperties':var g=function(c){var d=a[c];void 0!==d.value&&(f[c]=d.value),void 0!==d.observer&&b.forEach(function(a){customElements.whenDefined(a.tagName.toLowerCase()).then(function(){a._createPropertyObserver&&a._createPropertyObserver(c,d.observer,!0)})})};for(var h in a)g(h);}}};for(var k in i)j()}b.forEach(function(a){a.setProperties?a.setProperties(f):Object.assign(a,f)})}}}},{key:'applyStyle',value:function(a,b){a&&b.forEach(function(b){if(b.shadowRoot){var c=a.cloneNode(!0);b.shadowRoot.appendChild(c)}})}},{key:'waitForLater',value:function(){var a=this;return this._retries++,100<this._retries?void console.error('XtalDecorator::waitForLater:  '+'Could not find the right targets '+this._CssSelector):void setTimeout(function(){a.evaluateCode()},100)}},{key:'evaluateCode',value:function(){if(this._validateTargets&&!this._targetValidator)return void this.waitForLater();var a=this.getTargets();if(!a||a.length<this._minElementCount)return void this.waitForLater();if(this._targetValidator&&!this._targetValidator(a,this))return void this.waitForLater();var b,c=this.querySelector('template');c&&(b=document.importNode(c.content,!0));var d=this.querySelector('script');!d&&b&&(d=b.querySelector('script'));var e=this.querySelector('style');return!e&&b&&(e=b.querySelector('style')),d||e?void(this.applyScript(d,a),this.applyStyle(e,a)):void console.error('XtalDecorator::evaluateCode:  '+'No script tag or style tag found to apply.'+this._CssSelector)}},{key:'connectedCallback',value:function(){this.evaluateCode()}},{key:'mergeDeep',value:function(a,b){var c=this;if('object'===('undefined'===typeof a?'undefined':babelHelpers.typeof(a))&&'object'===('undefined'===typeof b?'undefined':babelHelpers.typeof(b))){for(var d in b){var e=b[d],f=a[d];if(e){if(!f){a[d]=e;continue}if(Array.isArray(e)&&Array.isArray(f)){if(0<f.length&&'undefined'===typeof f[0].id)continue;for(var g,h=function(){var a=e[j];if('undefined'===typeof a.id)return'continue';var b=f.find(function(b){return b.id===a.id});b?c.mergeDeep(b,a):f.push(a)},j=0,i=e.length;j<i;j++)g=h(),'continue'===g;continue}switch('undefined'===typeof e?'undefined':babelHelpers.typeof(e)){case'object':switch('undefined'===typeof f?'undefined':babelHelpers.typeof(f)){case'object':this.mergeDeep(f,e);break;default:a[d]=e;}break;default:a[d]=e;}}}return a}}},{key:'validateTargets',set:function(a){a?this.setAttribute('validate-targets',''):this.removeAttribute('validate-targets')}},{key:'targetValidator',set:function(a){this._targetValidator=a}}],[{key:'is',get:function(){return'xtal-decorator'}},{key:'observedAttributes',get:function(){return['selector','min-element-count','validate-targets']}}]),b}(HTMLElement);customElements.define(a.is,a)})();