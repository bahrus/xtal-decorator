(function(){var DASH_TO_CAMEL=/-[a-z]/g;function dashToCamelCase(dash){return dash.replace(DASH_TO_CAMEL,function(m){return m[1].toUpperCase()})}function getChildren(parent){switch(parent.nodeName){case"IFRAME":return this.$0.contentWindow.document.body.childNodes;default:var publicChildren=parent.childNodes,returnObj=[];if(parent.shadowRoot){parent.shadowRoot.childNodes.forEach(function(node){returnObj.push(node)})}parent.childNodes.forEach(function(node){returnObj.push(node)});return returnObj;}}function getChildFromSinglePath(el,token){var idx=0,nonIndexedToken=token;if(".."===token){return el.parentNode}if(token.endsWith("]")){var posOfOpen=token.indexOf("["),indxString=token.substring(posOfOpen+1,token.length-1);idx=parseInt(indxString);nonIndexedToken=token.substring(0,posOfOpen)}var matchingNodes=[];getChildren(el).forEach(function(child){if(child.matches&&child.matches(nonIndexedToken)){matchingNodes.push(child)}});return matchingNodes[idx]}var XtalDeco=function(_HTMLElement){babelHelpers.inherits(XtalDeco,_HTMLElement);function XtalDeco(){babelHelpers.classCallCheck(this,XtalDeco);return babelHelpers.possibleConstructorReturn(this,(XtalDeco.__proto__||Object.getPrototypeOf(XtalDeco)).apply(this,arguments))}babelHelpers.createClass(XtalDeco,[{key:"connectedCallback",value:function connectedCallback(){this.style.display="none";this.getElement("_nextSibling",function(t){return t.nextElementSibling});this.getElement("_script",function(t){return t.querySelector("script")})}},{key:"attachBehavior",value:function attachBehavior(evalObj,target){for(var topKey in evalObj){var subObj=evalObj[topKey];switch(topKey){case"on":for(var key in subObj){var handlerKey=key+"_decoHandler",prop=Object.defineProperty(target,handlerKey,{enumerable:!1,configurable:!0,writable:!0,value:subObj[key]});target.addEventListener(key,target[handlerKey])}break;case"props":var _loop=function(_key){var propVal=subObj[_key];Object.defineProperty(target,_key,{get:function get(){return this["_"+_key]},set:function set(val){this["_"+_key]=val;var newEvent=new CustomEvent(_key+"-changed",{detail:{value:val},bubbles:!0,composed:!1});this.dispatchEvent(newEvent);if(this.onPropsChange)this.onPropsChange(_key,val)},enumerable:!0,configurable:!0});target[_key]=propVal};for(var _key in subObj){_loop(_key)}break;default:switch(babelHelpers.typeof(subObj)){case"function":Object.defineProperty(target,topKey,{enumerable:!1,configurable:!0,writable:!0,value:subObj});break;case"object":target[topKey]=subObj;break;}}}}},{key:"getElement",value:function getElement(fieldName,getter){var _this=this;this[fieldName]=getter(this);if(!this[fieldName]){setTimeout(function(){_this.getElement(fieldName,getter)});return}this.onDecoPropsChange()}},{key:"evaluateCode",value:function evaluateCode(scriptElement,target){var evalObj=eval(scriptElement.innerHTML);this.attachBehavior(evalObj,target);this._nextSibling.removeAttribute("disabled")}},{key:"onDecoPropsChange",value:function onDecoPropsChange(){if(!this._nextSibling||!this._script)return;this.evaluateCode(this._script,this._nextSibling)}}],[{key:"is",get:function get(){return"xtal-deco"}}]);return XtalDeco}(HTMLElement);define(XtalDeco);function define(custEl){var tagName=custEl.is;if(customElements.get(tagName)){console.warn("Already registered "+tagName);return}customElements.define(tagName,custEl)}var disabled="disabled";function XtallatX(superClass){return function(_superClass){babelHelpers.inherits(_class,_superClass);function _class(){var _this2;babelHelpers.classCallCheck(this,_class);_this2=babelHelpers.possibleConstructorReturn(this,(_class.__proto__||Object.getPrototypeOf(_class)).apply(this,arguments));_this2._evCount={};return _this2}babelHelpers.createClass(_class,[{key:"attr",value:function attr(name,val,trueVal){var setOrRemove=val?"set":"remove";this[setOrRemove+"Attribute"](name,trueVal||val)}},{key:"to$",value:function to$(number){var mod=number%2;return(number-mod)/2+"-"+mod}},{key:"incAttr",value:function incAttr(name){var ec=this._evCount;if(name in ec){ec[name]++}else{ec[name]=0}this.attr("data-"+name,this.to$(ec[name]))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldVal,newVal){switch(name){case disabled:this._disabled=null!==newVal;break;}}},{key:"de",value:function de(name,detail){var eventName=name+"-changed",newEvent=new CustomEvent(eventName,{detail:detail,bubbles:!0,composed:!1});this.dispatchEvent(newEvent);this.incAttr(eventName);return newEvent}},{key:"_upgradeProperties",value:function _upgradeProperties(props){var _this3=this;props.forEach(function(prop){if(_this3.hasOwnProperty(prop)){var value=_this3[prop];delete _this3[prop];_this3[prop]=value}})}},{key:"disabled",get:function get(){return this._disabled},set:function set(val){this.attr(disabled,val,"")}}],[{key:"observedAttributes",get:function get(){return[disabled]}}]);return _class}(superClass)}function qsa(css,from){return[].slice.call((from?from:this).querySelectorAll(css))}var into_next_element="into-next-element",import_template="import-template",attach_script="attach-script",XtalDecor=function(_XtallatX){babelHelpers.inherits(XtalDecor,_XtallatX);function XtalDecor(){babelHelpers.classCallCheck(this,XtalDecor);return babelHelpers.possibleConstructorReturn(this,(XtalDecor.__proto__||Object.getPrototypeOf(XtalDecor)).apply(this,arguments))}babelHelpers.createClass(XtalDecor,[{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldVal,newVal){babelHelpers.get(XtalDecor.prototype.__proto__||Object.getPrototypeOf(XtalDecor.prototype),"attributeChangedCallback",this).call(this,name,oldVal,newVal);switch(name){case import_template:this._importTemplate=null!==newVal;break;case attach_script:this._attachScript=null!==newVal;break;case into_next_element:this._intoNextElement=null!==newVal;break;}this.onDecoPropsChange()}},{key:"connectedCallback",value:function connectedCallback(){this._upgradeProperties(["disabled","attachScript","importTemplate","intoNextElement","whereCSSMatches"]);this._connected=!0;this.onDecoPropsChange();this.addMutationObserver()}},{key:"disconnectedCallback",value:function disconnectedCallback(){if(this._mutationObserver)this._mutationObserver.disconnect()}},{key:"addMutationObserver",value:function addMutationObserver(){var _this4=this;this._mutationObserver=new MutationObserver(function(){_this4.getTemplatesAndScripts();_this4.appendTemplates()});this.getTemplatesAndScripts();this.appendTemplates();this._mutationObserver.observe(this,{childList:!0})}},{key:"getTemplatesAndScripts",value:function getTemplatesAndScripts(){this._templates=qsa("template",this);this._scripts=qsa("script",this)}},{key:"onDecoPropsChange",value:function onDecoPropsChange(){if(!this._connected||this.disabled)return;if(this._intoNextElement&&!this._nextSibling){this.getElement("_nextSibling",function(t){return t.nextElementSibling});return}this.appendTemplates();if(this._attachScript&&this._intoNextElement)this.evaluateCode()}},{key:"appendTemplates",value:function appendTemplates(target){var _this5=this;if(!this._templates)return;if(!target&&this._intoNextElement)target=this._nextSibling;if(this._importTemplate&&target){customElements.whenDefined(target.tagName.toLowerCase()).then(function(){_this5._templates.forEach(function(template){if(template.dataset.xtalTemplInserted)return;var subTarget=target,path=template.dataset.path;if(path){subTarget=cd(target,path)}var clone=document.importNode(template.content,!0);subTarget.shadowRoot.appendChild(clone);template.dataset.xtalTemplInserted="true"})})}}},{key:"attachScripts",value:function attachScripts(target){var _this6=this;if(!this._scripts)return;if(!target&&this._intoNextElement)target=this._nextSibling;if(this._attachScript&&target){customElements.whenDefined(target.tagName.toLowerCase()).then(function(){_this6._scripts.forEach(function(script){if(script.dataset.xtalScriptAttached)return;var subTarget=target,path=script.dataset.path;if(path){subTarget=cd(target,path)}_this6.evaluateCode(script,subTarget)})})}}},{key:"intoNextElement",get:function get(){return this._intoNextElement},set:function set(val){this.attr(into_next_element,val,"")}},{key:"importTemplate",get:function get(){return this._importTemplate},set:function set(val){this.attr(import_template,val,"")}},{key:"attachScript",get:function get(){return this._attachScript},set:function set(val){this.attr(attach_script,val,"")}}],[{key:"is",get:function get(){return"xtal-decor"}},{key:"observedAttributes",get:function get(){return babelHelpers.get(XtalDecor.__proto__||Object.getPrototypeOf(XtalDecor),"observedAttributes",this).concat([into_next_element,import_template,attach_script])}}]);return XtalDecor}(XtallatX(XtalDeco));XtalDecor._addedNodeInsertionStyle=!1;define(XtalDecor);var where_target_selector="where-target-selector",XtalDecorator=function(_XtalDecor){babelHelpers.inherits(XtalDecorator,_XtalDecor);function XtalDecorator(){var _this7;babelHelpers.classCallCheck(this,XtalDecorator);_this7=babelHelpers.possibleConstructorReturn(this,(XtalDecorator.__proto__||Object.getPrototypeOf(XtalDecorator)).apply(this,arguments));_this7._host=document;return _this7}babelHelpers.createClass(XtalDecorator,[{key:"insertListener",value:function insertListener(e){if(e.animationName===this.id){this.appendTemplates(event.target);this.attachScripts(event.target)}}},{key:"addEventListener",value:function addEventListener(){if(this._boundInsertListener)return;var styleInner="\n        @keyframes ".concat(this.id," {\n            from {\n                opacity: 0.99;\n            }\n            to {\n                opacity: 1;\n            }\n        }\n\n        ").concat(this._whereTargetSelector,"{\n            animation-duration: 0.001s;\n            animation-name: ").concat(this.id,";\n        }\n        "),style=document.createElement("style");style.innerHTML=styleInner;document.body.appendChild(style);this._boundInsertListener=this.insertListener.bind(this);document.addEventListener("animationstart",this._boundInsertListener,!1);document.addEventListener("MSAnimationStart",this._boundInsertListener,!1);document.addEventListener("webkitAnimationStart",this._boundInsertListener,!1)}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldVal,newVal){switch(name){case where_target_selector:this._whereTargetSelector=newVal;break;}babelHelpers.get(XtalDecorator.prototype.__proto__||Object.getPrototypeOf(XtalDecorator.prototype),"attributeChangedCallback",this).call(this,name,oldVal,newVal)}},{key:"connectedCallback",value:function connectedCallback(){this._upgradeProperties(["whereTargetSelector"]);babelHelpers.get(XtalDecorator.prototype.__proto__||Object.getPrototypeOf(XtalDecorator.prototype),"connectedCallback",this).call(this)}},{key:"disconnectedCallback",value:function disconnectedCallback(){if(this._boundInsertListener){document.removeEventListener("animationstart",this._boundInsertListener);document.removeEventListener("MSAnimationStart",this._boundInsertListener);document.removeEventListener("webkitAnimationStart",this._boundInsertListener)}}},{key:"onDecoPropsChange",value:function onDecoPropsChange(){if(!this._whereTargetSelector){babelHelpers.get(XtalDecorator.prototype.__proto__||Object.getPrototypeOf(XtalDecorator.prototype),"onDecoPropsChange",this).call(this);return}if(!this.id){console.error("xtal-decorator requires an id");return}this.addEventListener()}},{key:"whereTargetSelector",get:function get(){return this._whereTargetSelector},set:function set(val){if(this._whereTargetSelector&&this._whereTargetSelector!==val)throw"Only supports one value";this.attr(where_target_selector,val)}}],[{key:"is",get:function get(){return"xtal-decorator"}},{key:"observedAttributes",get:function get(){return babelHelpers.get(XtalDecorator.__proto__||Object.getPrototypeOf(XtalDecorator),"observedAttributes",this).concat([where_target_selector])}}]);return XtalDecorator}(XtalDecor);define(XtalDecorator)})();