!function(){const DASH_TO_CAMEL=/-[a-z]/g;function dashToCamelCase(t){return t.replace(DASH_TO_CAMEL,t=>t[1].toUpperCase())}function getChildren(t){switch(t.nodeName){case"IFRAME":return this.$0.contentWindow.document.body.childNodes;default:t.childNodes;const e=[];return t.shadowRoot&&t.shadowRoot.childNodes.forEach(t=>{e.push(t)}),t.childNodes.forEach(t=>{e.push(t)}),e}}function getChildFromSinglePath(t,e){let s=0,n=e;if(".."===e)return t.parentNode;if(e.endsWith("]")){const t=e.indexOf("["),i=e.substring(t+1,e.length-1);s=parseInt(i),n=e.substring(0,t)}const i=[];return getChildren(t).forEach(t=>{t.matches&&t.matches(n)&&i.push(t)}),i[s]}const spKey="__xtal_deco_onPropsChange";class XtalDeco extends HTMLElement{static get is(){return"xtal-deco"}connectedCallback(){this.style.display="none",this.getElement("_nextSibling",t=>t.nextElementSibling),this.getElement("_script",t=>t.querySelector("script"))}static attachBehavior(t,e){for(const s in e){const n=e[s];switch(s){case"on":for(const e in n){const s=e+"_decoHandler";Object.defineProperty(t,s,{enumerable:!1,configurable:!0,writable:!0,value:n[e]});t.addEventListener(e,t[s])}break;case"props":for(const e in n){const s=n[e];Object.defineProperty(t,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t;const s=new CustomEvent(e+"-changed",{detail:{value:t},bubbles:!0,composed:!1});this.dispatchEvent(s),this[spKey]&&this[spKey](e,t)},enumerable:!0,configurable:!0}),t[e]=s}break;case"setters":for(const e in n){const s=n[e];t[e]=s}break;default:switch(typeof n){case"function":const e="onPropsChange"===s?spKey:s;Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n});break;case"object":t[s]=n}}}}getElement(t,e){this[t]=e(this),this[t]?this.onDecoPropsChange():setTimeout(()=>{this.getElement(t,e)})}evaluateCode(scriptElement,target){const evalObj=eval(scriptElement.innerHTML);XtalDeco.attachBehavior(target,evalObj);const nS=this._nextSibling,da=nS.getAttribute("disabled");null!==da&&(0===da.length||"1"===da?nS.removeAttribute("disabled"):nS.setAttribute("disabled",(parseInt(da)-1).toString()))}onDecoPropsChange(){this._nextSibling&&this._script&&this.evaluateCode(this._script,this._nextSibling)}}function define(t){let e=t.is;customElements.get(e)?console.warn("Already registered "+e):customElements.define(e,t)}define(XtalDeco);const disabled="disabled";function XtallatX(t){return class extends t{constructor(){super(...arguments),this._evCount={}}static get observedAttributes(){return[disabled]}get disabled(){return this._disabled}set disabled(t){this.attr(disabled,t,"")}attr(t,e,s){this[(e?"set":"remove")+"Attribute"](t,s||e)}to$(t){const e=t%2;return(t-e)/2+"-"+e}incAttr(t){const e=this._evCount;t in e?e[t]++:e[t]=0,this.attr("data-"+t,this.to$(e[t]))}attributeChangedCallback(t,e,s){switch(t){case disabled:this._disabled=null!==s}}de(t,e,s){const n=t+(s?"":"-changed"),i=new CustomEvent(n,{detail:e,bubbles:!0,composed:!1});return this.dispatchEvent(i),this.incAttr(n),i}_upgradeProperties(t){t.forEach(t=>{if(this.hasOwnProperty(t)){let e=this[t];delete this[t],this[t]=e}})}}}function observeCssSelector(t){const e=["animationstart","MSAnimationStart","webkitAnimationStart"];return class extends t{addCSSListener(t,s,n){if(this._boundInsertListener)return;const i=`\n            @keyframes ${t} {\n                from {\n                    opacity: 0.99;\n                }\n                to {\n                    opacity: 1;\n                }\n            }\n    \n            ${s}{\n                animation-duration: 0.001s;\n                animation-name: ${t};\n            }\n            `,a=document.createElement("style");a.innerHTML=i;const r=getHost(this);null!==r?r.shadowRoot.appendChild(a):document.body.appendChild(a),this._boundInsertListener=n.bind(this);const o=r?r.shadowRoot:document;e.forEach(t=>{o.addEventListener(t,this._boundInsertListener,!1)})}disconnectedCallback(){if(this._boundInsertListener){const t=getHost(this),s=t?t.shadowRoot:document;e.forEach(t=>{s.removeEventListener(t,this._boundInsertListener)})}void 0!==super.disconnectedCallback&&super.disconnectedCallback()}}}function qsa(t,e){return[].slice.call((e||this).querySelectorAll(t))}const into_next_element="into-next-element",import_template="import-template",attach_script="attach-script";class XtalDecor extends(XtallatX(XtalDeco)){static get is(){return"xtal-decor"}get intoNextElement(){return this._intoNextElement}set intoNextElement(t){this.attr(into_next_element,t,"")}get importTemplate(){return this._importTemplate}set importTemplate(t){this.attr(import_template,t,"")}get attachScript(){return this._attachScript}set attachScript(t){this.attr(attach_script,t,"")}static get observedAttributes(){return super.observedAttributes.concat([into_next_element,import_template,attach_script])}attributeChangedCallback(t,e,s){switch(super.attributeChangedCallback(t,e,s),t){case import_template:this._importTemplate=null!==s;break;case attach_script:this._attachScript=null!==s;break;case into_next_element:this._intoNextElement=null!==s}this.onDecoPropsChange()}connectedCallback(){this._upgradeProperties(["disabled","attachScript","importTemplate","intoNextElement","whereCSSMatches"]),this._connected=!0,this.onDecoPropsChange(),this.addMutationObserver()}disconnectedCallback(){this._mutationObserver&&this._mutationObserver.disconnect()}do(){this.appendTemplates(),this.attachScripts()}addMutationObserver(){this._mutationObserver=new MutationObserver(t=>{this.getTemplatesAndScripts(),this.do()}),this.getTemplatesAndScripts(),this.do(),this._mutationObserver.observe(this,{childList:!0})}getTemplatesAndScripts(){this._templates=qsa("template",this),this._scripts=qsa("script",this)}onDecoPropsChange(){this._connected&&!this.disabled&&(!this._intoNextElement||this._nextSibling?this.do():this.getElement("_nextSibling",t=>t.nextElementSibling))}appendTemplates(t){this._templates&&(!t&&this._intoNextElement&&(t=this._nextSibling),this._importTemplate&&t&&customElements.whenDefined(t.tagName.toLowerCase()).then(()=>{this._templates.forEach(e=>{if(e.dataset.xtalTemplInserted)return;let s=t;const n=e.dataset.path;n&&(s=cd(t,n));const i=document.importNode(e.content,!0);s.shadowRoot.appendChild(i),e.dataset.xtalTemplInserted="true"})}))}doScripts(t){this._scripts.forEach(e=>{if(e.dataset.xtalScriptAttached)return;let s=t;const n=e.dataset.path;n&&(s=cd(t,n)),this.evaluateCode(e,s)})}attachScripts(t){if(this._scripts&&(!t&&this._intoNextElement&&(t=this._nextSibling),this._attachScript&&t)){t.localName.indexOf("-")>-1?customElements.whenDefined(t.tagName.toLowerCase()).then(()=>{this.doScripts(t)}):this.doScripts(t)}}}XtalDecor._addedNodeInsertionStyle=!1,define(XtalDecor);const where_target_selector="where-target-selector";class XtalDecorator extends(observeCssSelector(XtalDecor)){static get is(){return"xtal-decorator"}static get observedAttributes(){return super.observedAttributes.concat([where_target_selector])}get whereTargetSelector(){return this._whereTargetSelector}set whereTargetSelector(t){if(this._whereTargetSelector&&this._whereTargetSelector!==t)throw"Only supports one value";this.attr(where_target_selector,t)}insertListener(t){if(t.animationName===this.id){const e=t.target;setTimeout(()=>{this.appendTemplates(e),this.attachScripts(e)},0)}}attributeChangedCallback(t,e,s){switch(t){case where_target_selector:this._whereTargetSelector=s}super.attributeChangedCallback(t,e,s)}connectedCallback(){this._upgradeProperties(["whereTargetSelector"]),super.connectedCallback()}onDecoPropsChange(){this._whereTargetSelector?this.id?this.addCSSListener(this.id,this._whereTargetSelector,this.insertListener):console.error("xtal-decorator requires an id"):super.onDecoPropsChange()}}define(XtalDecorator)}();